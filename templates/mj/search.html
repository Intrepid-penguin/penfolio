{% extends 'mj/home.html' %}
{% load static %} {# Standard practice, though search.html might not directly use static files itself #}
{% load search %} {# For the highlight filter #}

{% block content %}
   <h1 class="text-2xl font-bold mb-6 text-center text-gray-700 dark:text-slate-100">Search Results for: "<span class="text-indigo-600 dark:text-indigo-400">{{ request.GET.q }}</span>"</h1>
   
   {% for result in results %} {# Assuming 'results' is the context variable for search results #}
       <div class="bg-white dark:bg-slate-800 dark:border dark:border-slate-700 shadow-md rounded-lg p-4 mb-4 hover:shadow-lg transition-shadow duration-200">
           <a href="{% url 'view-j' result.id %}" class="block">
               <div class="flex justify-between items-start mb-1"> {# items-start for title wrapping #}
                   <h4 class="text-lg font-semibold text-gray-800 dark:text-slate-100">
                       {{ result.title|highlight:request.GET.q|safe }} {# Apply highlight filter, ensure |safe if highlight returns HTML #}
                   </h4>
                   {# Optionally, add mood-specific styling based on result.mood_tag if needed #}
                   {# Example:
                       {% if result.mood_tag == 'ME' %}
                           <i class="fas fa-smile text-green-500 ml-2"></i>
                       {% elif result.mood_tag == 'GL' %}
                           <i class="fas fa-cloud-rain text-blue-500 ml-2"></i>
                       {% elif result.mood_tag == 'CO' %}  {# Assuming CO for Covert if it's searchable #}
                           <i class="fas fa-user-secret text-purple-500 ml-2"></i>
                       {% endif %}
                   #}
               </div>
               <div class="flex justify-between items-center text-sm text-gray-600 dark:text-slate-400 mt-2">
                   <span>{{ result.date_added }}</span>
                   <i class="fa-solid fa-angle-right text-gray-500 dark:text-slate-500"></i>
               </div>
           </a>
       </div>
   {% empty %}
       <h2 class="text-gray-500 dark:text-gray-400 text-center py-10 text-lg">
           Sorry, no journal entry found for your search query: "<span class="font-medium">{{ request.GET.q }}</span>".
       </h2>
   {% endfor %}
{% endblock content %}